import{h as M,a as w}from"./axios-ca9f0948.js";import{o as l,c as d,a,u as o,t as c,F as v,_ as H,n as S,r as C,g as p,b as N,w as W,e as $,f as k,S as P}from"./index-9508d379.js";function x(t,n){function e(i){return!!(t==="radiant"&&i.isRadiant||t!=="radiant"&&!i.isRadiant)}return n.players.filter(e)}function R(t,n){const e=n.find(u=>u.id===t),r=e["1_pick"]+e["2_pick"]+e["3_pick"]+e["4_pick"]+e["5_pick"]+e["6_pick"]+e["7_pick"]+e["8_pick"];return(e["1_win"]+e["2_win"]+e["3_win"]+e["4_win"]+e["5_win"]+e["6_win"]+e["7_win"]+e["8_win"])/r*100}const O=["src"],T={key:0,class:"PlayerInfoSection"},b={key:1,class:"PlayerInfoSection"},A={class:"PlayerInfoSection"},B=a("h3",null,"KDA",-1),E={class:"PlayerInfoSection"},F=a("h3",null,"Damage",-1),J={class:"PlayerInfoSection"},V=a("h3",null,"Gold",-1),L={class:"PlayerInfoSection"},G=a("h3",null,"Win %",-1),z={__name:"playerInfo",props:["playerInfo","playerWinrate"],setup(t){const n=t;console.log(n.playerInfo.personaname);const e=M.heroes.find(r=>r.id===n.playerInfo.hero_id).img;return(r,i)=>(l(),d(v,null,[a("img",{class:"PlayerImageSection",src:"https://cdn.cloudflare.steamstatic.com"+o(e),width:"96",height:"54"},null,8,O),t.playerInfo.personaname?(l(),d("h3",b,c(t.playerInfo.personaname),1)):(l(),d("h3",T,"Mysterious Stranger")),a("div",A,[B,a("p",null,c(t.playerInfo.kills)+" - "+c(t.playerInfo.deaths)+" - "+c(t.playerInfo.assists),1)]),a("div",E,[F,a("p",null,c(t.playerInfo.hero_damage),1)]),a("div",J,[V,a("p",null,c(t.playerInfo.gold),1)]),a("div",L,[G,a("p",null,c(t.playerWinrate.toFixed(2)),1)])],64))}};const K={key:0},j={key:1},q={class:"PlayerCard"},Q={__name:"teamInfo",props:["teamInfo","allHeroStats","teamName","teamWinrates","teamOverallWin","winner","enemyWinRate"],setup(t){const n=t,e=n.teamName==="Radiant"&&n.winner||n.teamName==="Dire"&&!n.winner,r=e?"#D59843":"#b04e53",_=n.teamOverallWin>n.enemyWinRate?"#D59843":"#b04e53";return(u,y)=>(l(),d(v,null,[a("h1",null,c(t.teamName),1),a("div",{style:S({backgroundColor:o(r)}),class:"WinLossCard"},[o(e)?(l(),d("h1",K,"Victory")):(l(),d("h1",j,"Defeat"))],4),a("div",{style:S({backgroundColor:o(_)}),class:"WinrateCard"},[a("h2",null,"The "+c(t.teamName)+" overall winrate is: "+c(t.teamOverallWin.toFixed(2)),1)],4),(l(!0),d(v,null,C(t.teamInfo,(h,m)=>(l(),d("div",q,[p(z,{playerInfo:h,playerWinrate:t.teamWinrates[m]},null,8,["playerInfo","playerWinrate"])]))),256))],64))}},D=H(Q,[["__scopeId","data-v-c2ec1df2"]]);const U={class:"AdvancedMatchViewContainer"},X={class:"TeamContainer"},Y={class:"TeamContainer"},Z={__name:"AdvancedMatchInfo",async setup(t){let n,e;const r=N.currentRoute.value.params.matchid;if(localStorage.getItem("currentMatchId")!==r){localStorage.currentMatchId=r,console.log("calling matches api");const s=([n,e]=W(()=>w.get(`https://api.opendota.com/api/matches/${r}`)),n=await n,e(),n);localStorage.currentMatchData=JSON.stringify(s.data)}if(!localStorage.getItem("allHeroStats")){console.log("calling hero stats api");const s=([n,e]=W(()=>w.get("https://api.opendota.com/api/heroStats")),n=await n,e(),n);localStorage.allHeroStats=JSON.stringify(s.data)}const i=JSON.parse(localStorage.getItem("currentMatchData")),_=JSON.parse(localStorage.getItem("allHeroStats")),u=x("radiant",i),y=x("dire",i),h=[],m=[];u.forEach(s=>{h.push(R(s.hero_id,_))}),y.forEach(s=>{m.push(R(s.hero_id,_))}),console.log(h);const g=h.reduce((s,f)=>s+f,0);console.log(g),console.log(m);const I=m.reduce((s,f)=>s+f,0);return console.log(I),(s,f)=>(l(),d("div",U,[a("div",X,[p(D,{teamInfo:o(u),allHeroStats:o(_),teamWinrates:h,teamOverallWin:o(g),teamName:"Radiant",winner:o(i).radiant_win,enemyWinRate:o(I)},null,8,["teamInfo","allHeroStats","teamOverallWin","winner","enemyWinRate"])]),a("div",Y,[p(D,{teamInfo:o(y),allHeroStats:o(_),teamWinrates:m,teamOverallWin:o(I),teamName:"Dire",winner:o(i).radiant_win,enemyWinRate:o(g)},null,8,["teamInfo","allHeroStats","teamOverallWin","winner","enemyWinRate"])])]))}},ee=H(Z,[["__scopeId","data-v-af83ab12"]]);const ae=a("div",{class:"ExplanationBar"},[a("div",{class:"ExplanationContent"},[a("h2",null,"Match Details"),a("p",{class:"ExplanationWaffle"}," These are the details for the match you selected. Here you can check the winrates of each hero, the player peformance, and who should have won based on the current meta (winrate) ")])],-1),te={class:"MatchInfoHolder"},ne=a("div",{class:"TemplateHolder"},[a("p",null,"Getting your match details"),a("div",{class:"loader"})],-1),re={__name:"MatchDetails",setup(t){return(n,e)=>(l(),d("div",null,[ae,(l(),$(P,null,{fallback:k(()=>[ne]),default:k(()=>[a("div",te,[p(ee)])]),_:1}))]))}};export{re as default};
