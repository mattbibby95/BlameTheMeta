import{h as H,a as w}from"./axios-ca9f0948.js";import{o as l,c as d,a as t,u as o,t as c,F as y,_ as D,n as S,r as M,g as p,b as $,w as W,e as N,f as k,S as O}from"./index-5c1ba0da.js";function x(a,n){function e(i){return!!(a==="radiant"&&i.isRadiant||a!=="radiant"&&!i.isRadiant)}return n.players.filter(e)}function R(a,n){const e=n.find(u=>u.id===a),r=e["1_pick"]+e["2_pick"]+e["3_pick"]+e["4_pick"]+e["5_pick"]+e["6_pick"]+e["7_pick"]+e["8_pick"];return(e["1_win"]+e["2_win"]+e["3_win"]+e["4_win"]+e["5_win"]+e["6_win"]+e["7_win"]+e["8_win"])/r*100}const P=["src"],T={key:0,class:"PlayerInfoSection"},b={key:1,class:"PlayerInfoSection"},B={class:"PlayerInfoSection"},E=t("h3",null,"KDA",-1),F={class:"PlayerInfoSection"},A=t("h3",null,"Damage",-1),J={class:"PlayerInfoSection"},L=t("h3",null,"Gold",-1),V={class:"PlayerInfoSection"},G=t("h3",null,"Win %",-1),z={__name:"playerInfo",props:["playerInfo","playerWinrate"],setup(a){const n=a;console.log(n.playerInfo.personaname);const e=H.heroes.find(r=>r.id===n.playerInfo.hero_id).img;return(r,i)=>(l(),d(y,null,[t("img",{class:"PlayerImageSection",src:"https://cdn.cloudflare.steamstatic.com"+o(e),width:"96",height:"54"},null,8,P),a.playerInfo.personaname?(l(),d("h3",b,c(a.playerInfo.personaname),1)):(l(),d("h3",T,"Mysterious Stranger")),t("div",B,[E,t("p",null,c(a.playerInfo.kills)+" - "+c(a.playerInfo.deaths)+" - "+c(a.playerInfo.assists),1)]),t("div",F,[A,t("p",null,c(a.playerInfo.hero_damage),1)]),t("div",J,[L,t("p",null,c(a.playerInfo.gold+a.playerInfo.gold_spent),1)]),t("div",V,[G,t("p",null,c(a.playerWinrate.toFixed(2)),1)])],64))}};const K={class:"TeamCard",style:{backgroundColor:"#1f2f3c"}},j={key:0},q={key:1},Q={class:"PlayerCard"},U={__name:"teamInfo",props:["teamInfo","allHeroStats","teamName","teamWinrates","teamOverallWin","winner","enemyWinRate"],setup(a){const n=a,e=n.teamName==="Radiant"&&n.winner||n.teamName==="Dire"&&!n.winner,r=e?"#D59843":"#b04e53",_=n.teamOverallWin>n.enemyWinRate?"#D59843":"#b04e53";return(u,g)=>(l(),d(y,null,[t("h1",K,c(a.teamName),1),t("div",{style:S({backgroundColor:o(r)}),class:"WinLossCard"},[o(e)?(l(),d("h1",j,"Victory")):(l(),d("h1",q,"Defeat"))],4),t("div",{style:S({backgroundColor:o(_)}),class:"WinrateCard"},[t("h2",null,"The "+c(a.teamName)+" overall winrate is: "+c(a.teamOverallWin.toFixed(2)),1)],4),(l(!0),d(y,null,M(a.teamInfo,(h,m)=>(l(),d("div",Q,[p(z,{playerInfo:h,playerWinrate:a.teamWinrates[m]},null,8,["playerInfo","playerWinrate"])]))),256))],64))}},C=D(U,[["__scopeId","data-v-c53400f2"]]);const X={class:"TeamContainer"},Y={class:"TeamContainer"},Z={__name:"AdvancedMatchInfo",async setup(a){let n,e;const r=$.currentRoute.value.params.matchid;if(localStorage.getItem("currentMatchId")!==r){localStorage.currentMatchId=r,console.log("calling matches api");const s=([n,e]=W(()=>w.get(`https://api.opendota.com/api/matches/${r}`)),n=await n,e(),n);localStorage.currentMatchData=JSON.stringify(s.data)}if(!localStorage.getItem("allHeroStats")){console.log("calling hero stats api");const s=([n,e]=W(()=>w.get("https://api.opendota.com/api/heroStats")),n=await n,e(),n);localStorage.allHeroStats=JSON.stringify(s.data)}const i=JSON.parse(localStorage.getItem("currentMatchData")),_=JSON.parse(localStorage.getItem("allHeroStats")),u=x("radiant",i),g=x("dire",i),h=[],m=[];u.forEach(s=>{h.push(R(s.hero_id,_))}),g.forEach(s=>{m.push(R(s.hero_id,_))}),console.log(h);const I=h.reduce((s,f)=>s+f,0);console.log(I),console.log(m);const v=m.reduce((s,f)=>s+f,0);return console.log(v),(s,f)=>(l(),d(y,null,[t("div",X,[p(C,{teamInfo:o(u),allHeroStats:o(_),teamWinrates:h,teamOverallWin:o(I),teamName:"Radiant",winner:o(i).radiant_win,enemyWinRate:o(v)},null,8,["teamInfo","allHeroStats","teamOverallWin","winner","enemyWinRate"])]),t("div",Y,[p(C,{teamInfo:o(g),allHeroStats:o(_),teamWinrates:m,teamOverallWin:o(v),teamName:"Dire",winner:o(i).radiant_win,enemyWinRate:o(I)},null,8,["teamInfo","allHeroStats","teamOverallWin","winner","enemyWinRate"])])],64))}},ee=D(Z,[["__scopeId","data-v-458211df"]]);const te={class:"MatchOverviewContainer"},ae=t("div",{class:"ExplanationBar"},[t("div",{class:"ExplanationContent"},[t("h2",null,"Match Details"),t("p",{class:"ExplanationWaffle"}," These are the details for the match you selected. Here you can check the winrates of each hero, the player peformance, and who should have won based on the current meta (winrate) ")])],-1),ne={class:"MatchInfoHolder"},oe=t("div",{class:"TemplateHolder"},[t("p",null,"Getting your match details"),t("div",{class:"loader"})],-1),le={__name:"MatchDetails",setup(a){return(n,e)=>(l(),d("div",te,[ae,(l(),N(O,null,{fallback:k(()=>[oe]),default:k(()=>[t("div",ne,[p(ee)])]),_:1}))]))}};export{le as default};
